<div class="map-shell">
  <div class="map" #mapEl></div>

  <aside class="panel">
    <div class="row">
      <div class="title">Map</div>
      <div class="muted">{{ vehicles().length }} vehicles</div>
    </div>

    <div class="muted status-line">
      Map: <span class="pill">{{ mapStatus() }}</span>
    </div>

    <div class="row">
      <button type="button" (click)="seedVehicles(10)">Seed 10</button>
      <button type="button" (click)="simRunning.set(!simRunning())">
        {{ simRunning() ? 'Pause' : 'Resume' }}
      </button>
      <button type="button" (click)="clearSelection()">Clear</button>
    </div>

    <hr />

    <div *ngIf="!selectedVehicle()" class="muted">
      Click a truck marker to view details.
    </div>

    <div *ngIf="selectedVehicle() as v" class="details">
      <div class="kv">
        <div class="k">Vehicle</div>
        <div class="v mono">{{ v.id }}</div>
      </div>

      <div class="kv">
        <div class="k">Status</div>
        <div class="v"><span class="pill">{{ v.status }}</span></div>
      </div>

      <div class="kv">
        <div class="k">Speed</div>
        <div class="v mono">{{ v.speedKph.toFixed(1) }} kph</div>
      </div>

      <div class="kv">
        <div class="k">Payload</div>
        <div class="v mono">{{ v.payloadTons.toFixed(1) }} t</div>
      </div>

      <div class="kv">
        <div class="k">Fuel</div>
        <div class="v mono">{{ v.fuelPct.toFixed(1) }}%</div>
      </div>

      <div class="kv">
        <div class="k">Health</div>
        <div class="v mono">{{ v.healthPct.toFixed(1) }}%</div>
      </div>

      <div class="kv">
        <div class="k">Position</div>
        <div class="v mono">
          {{ v.position.lat.toFixed(5) }}, {{ v.position.lng.toFixed(5) }}
        </div>
      </div>
    </div>
  </aside>
</div>
